---
import { Icon } from "astro-icon/components";
---

<header
  class="border-border fixed top-0 z-50 w-full border-b bg-white/70 backdrop-blur-md"
>
  <div class="mx-auto max-w-7xl px-4">
    <div class="flex h-16 items-center justify-between">
      <div class="flex items-center justify-center gap-2">
        <a
          href="#hero"
          class="flex items-center gap-2 transition-opacity hover:opacity-80"
        >
          <img
            src="/images/commit-logo.png"
            alt="commit logo"
            class="h-8 w-8"
          />
          <img
            src="/images/commit-logo-txt.png"
            alt="commit logo txt"
            class="-mt-px h-4"
          />
        </a>
      </div>

      <nav class="hidden items-center gap-4 text-sm md:flex">
        <a
          href="#problem"
          class="inline-flex items-center gap-1 rounded-md px-2 py-1 transition-colors duration-150 hover:bg-slate-100 hover:text-slate-900 hover:opacity-80 focus:bg-slate-100 focus:opacity-80"
          >Problem</a
        >
        <a
          href="#solution"
          class="inline-flex items-center gap-1 rounded-md px-2 py-1 transition-colors duration-150 hover:bg-slate-100 hover:text-slate-900 hover:opacity-80 focus:bg-slate-100 focus:opacity-80"
          >Solution</a
        >
        <a
          href="#features"
          class="inline-flex items-center gap-1 rounded-md px-2 py-1 transition-colors duration-150 hover:bg-slate-100 hover:text-slate-900 hover:opacity-80 focus:bg-slate-100 focus:opacity-80"
          >Features</a
        >
        <a
          href="#team"
          class="inline-flex items-center gap-1 rounded-md px-2 py-1 transition-colors duration-150 hover:bg-slate-100 hover:text-slate-900 hover:opacity-80 focus:bg-slate-100 focus:opacity-80"
          >Team</a
        >
        <a
          href="#faq"
          class="inline-flex items-center gap-1 rounded-md px-2 py-1 transition-colors duration-150 hover:bg-slate-100 hover:text-slate-900 hover:opacity-80 focus:bg-slate-100 focus:opacity-80"
          >FAQ</a
        >
        <a
          href="https://github.com/getcommitapp/commit"
          target="_blank"
          rel="noopener"
          class="inline-flex items-center gap-1 rounded-md px-2 py-1 text-slate-700 transition-colors duration-150 hover:bg-slate-100 hover:text-slate-900 hover:opacity-80 focus:bg-slate-100 focus:opacity-80"
        >
          <Icon name="mdi:github" class="h-6 w-6" aria-hidden="true" />
        </a>
        <a
          href="#cta"
          class="bg-primary inline-flex items-center rounded-md px-3 py-1.5 font-medium text-slate-900 hover:opacity-90"
          >Get started</a
        >
      </nav>

      <!-- Hamburger Menu Button -->
      <button
        id="menu-toggle"
        class="cursor-pointer p-2 transition-opacity duration-300 focus:outline-none md:hidden"
        aria-label="Toggle menu"
      >
        <Icon name="mdi:menu" class="size-6 text-slate-900" />
      </button>
    </div>
  </div>

  <!-- Full Screen Overlay Menu -->
  <div
    id="overlay-menu"
    class="overlay-menu invisible fixed inset-0 z-40 h-screen w-full bg-white/75 backdrop-blur-md transition-all duration-200 ease-out"
  >
    <!-- Close Button -->
    <button
      id="close-menu"
      class="fixed top-4 right-4 z-50 cursor-pointer p-2 transition-opacity duration-300 focus:outline-none"
      aria-label="Close menu"
    >
      <Icon name="mdi:close" class="size-6 text-slate-900" />
    </button>

    <div class="flex h-full items-center justify-center p-8">
      <nav class="flex flex-col items-center gap-8 text-xl">
        <a href="#hero" class="menu-link hover:opacity-80">Home</a>
        <a href="#problem" class="menu-link hover:opacity-80">Problem</a>
        <a href="#solution" class="menu-link hover:opacity-80">Solution</a>
        <a href="#features" class="menu-link hover:opacity-80">Features</a>
        <a href="#team" class="menu-link hover:opacity-80">Team</a>
        <a href="#faq" class="menu-link hover:opacity-80">FAQ</a>
        <a
          href="https://github.com/your-repo-or-profile"
          target="_blank"
          rel="noopener"
          class="menu-link inline-flex items-center gap-1 hover:opacity-80"
        >
          <Icon name="mdi:github" class="h-8 w-8" aria-hidden="true" />
        </a>
        <a
          href="#cta"
          class="bg-primary menu-link rounded-md px-6 py-3 font-medium text-slate-900 hover:opacity-90"
          >Get started</a
        >
      </nav>
    </div>
  </div>
</header>

<style>
  /* Fade out burger button when overlay is open */
  #menu-toggle.menu-open {
    opacity: 0;
  }

  /* Show overlay when open */
  .overlay-menu.open {
    opacity: 1 !important;
    visibility: visible !important;
  }
</style>

<script is:inline>
  document.addEventListener("DOMContentLoaded", function () {
    const menuToggle = document.getElementById("menu-toggle");
    const closeMenu = document.getElementById("close-menu");
    const overlayMenu = document.getElementById("overlay-menu");
    const menuLinks = document.querySelectorAll(".menu-link");

    function openMenu() {
      overlayMenu?.classList.add("open");
      menuToggle?.classList.add("menu-open");
      document.body.style.overflow = "hidden";
    }

    function closeMenuFn() {
      overlayMenu?.classList.remove("open");
      menuToggle?.classList.remove("menu-open");
      document.body.style.overflow = "";
    }

    if (menuToggle && overlayMenu && closeMenu) {
      // Open menu when clicking hamburger
      menuToggle.addEventListener("click", openMenu);

      // Close menu when clicking close button
      closeMenu.addEventListener("click", closeMenuFn);

      // Close menu when clicking on links
      menuLinks.forEach((link) => {
        link.addEventListener("click", closeMenuFn);
      });

      // Close menu when pressing escape
      document.addEventListener("keydown", function (e) {
        if (e.key === "Escape" && overlayMenu.classList.contains("open")) {
          closeMenuFn();
        }
      });
    }
  });
</script>
