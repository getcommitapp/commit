@startuml ui-flow
title commit. - Mobile UI Flow

skinparam dpi 180
skinparam ArrowColor #555555
skinparam ArrowThickness 1
skinparam defaultTextAlignment center
skinparam shadowing false

start

:Open app;
if (First opening?) then (yes)
  :Sign In\n(Google / Apple);
  :Onboarding 1 -> 2 -> 3 -> 4;
else (no)
endif

partition "Tabs" {
  if (Select tab?) then (Home)
    :Home;
    :Dashboard / Activity Feed;
  elseif (Goals)
    :Goals;
    if (Action?) then (View)
      :Select goal;\nShow details modal;
    elseif (Create)
      :+ Create button;
      :Goal Creation Choice;
      if (Goal type?) then (Custom)
        :Custom Goal Form;
        -> :Goal Creation;
        :Goal Form\nEnter title, description,\n due date, verification method\n(photo, checkin, movement);
      elseif (Template)
        :Choose from templates;
        :Pre-filled Goal Form;
      endif
    endif
  elseif (Groups)
    :Groups;
    if (Action?) then (View)
      :Select group;
      :Show Group Details (modal);
    elseif (Create)
      :+ Create button;
      :Create new group;
      -> :Group Creation;
      :Group Form\nName, description, goal selection;
      :Add members via invite code;
    elseif (Join)
      :Enter invite code;
      :Join existing group;
    endif
  elseif (Reviews)
    :Reviews;
    note right: Only visible for reviewer/admin roles
    :Review Queue;
    :Swipe through photo submissions;
    :Review photo evidence;
    if (Swipe direction?) then (Right - Approve)
      :Approve photo submission;
    elseif (Left - Reject)
      :Reject photo submission;
    endif
  elseif (Profile)
    :Profile;
    :View Account Info\n(Name, Email - read only);
    :Payment Method Management;
    if (Payment method?) then (Not set up)
      :Set up Payment Method\n(Stripe Card Field);
    elseif (Active)
      :Update Payment Method\n(Stripe Card Field);
    endif
  endif
}

note right
  Group joining requires invite code
  Payment integration via Stripe
  Multiple verification methods supported
end note

stop
@enduml
